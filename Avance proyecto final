#include <iostream>
#include <vector>

using namespace std;

class Atleta {
public:
    string nombre;
    int numero;
    vector<double> tiempos;

    Atleta(string nombre, int numero) {
        this->nombre = nombre;
        this->numero = numero;
    }

    void agregarTiempo(double tiempo) {
        this->tiempos.push_back(tiempo);
    }

    void calcularPromedio() {
        if (tiempos.size() >= 2) {
            double promedio = (tiempos[tiempos.size() - 2] + tiempos[tiempos.size() - 1]) / 2.0;
            tiempos.erase(tiempos.begin(), tiempos.end() - 2);
            agregarTiempo(promedio);
        }
    }

    double promedio() {
        double sum = 0;
        for (double tiempo : tiempos) {
            sum += tiempo;
        }
        return sum / tiempos.size();
    }
};

class Prueba {
public:
    vector<Atleta> atletas;

    void agregarAtleta(string nombre, int numero) {
        atletas.emplace_back(nombre, numero);
    }

    void registrarTiempos() {
        int cantidadTiempos;
        double tiempo;
        for (Atleta& atleta : atletas) {
            cout << "Ingrese la cantidad de tiempos para el atleta " << atleta.nombre << " (numero " << atleta.numero << "): ";
            cin >> cantidadTiempos;
            cout << "Ingrese los tiempos para el atleta " << atleta.nombre << " (numero " << atleta.numero << "): ";
            for (int i = 0; i < cantidadTiempos; i++) {
                cin >> tiempo;
                atleta.agregarTiempo(tiempo);
            }
            atleta.calcularPromedio();
        }
    }

    void mostrarResultados() {
        for (Atleta& atleta : atletas) {
            cout << "Atleta " << atleta.nombre << " (numero " << atleta.numero << "): ";
            if (atleta.tiempos.empty()) {
                cout << "No hay tiempos registrados" << endl;
            } else {
                cout << "Promedio: " << atleta.promedio() << " - utlimos tiempos: ";
                for (double tiempo : atleta.tiempos) {
                    cout << tiempo << " ";
                }
                cout << endl;
            }
        }
    }
};

int main() {
    Prueba prueba;
    int opcion;
    string nombre;
    int numero;

    while (true) {
        cout << "MENU:" << endl;
        cout << "1. Agregar atleta" << endl;
        cout << "2. Registrar tiempos" << endl;
        cout << "3. Mostrar resultados" << endl;
        cout << "4. Salir" << endl;
        cout << "Selecciona una opcion: ";
        cin >> opcion;

        switch (opcion) {
            case 1:
                cout << "Ingrese el nombre del atleta: ";
                cin >> nombre;
                cout << "Ingrese el numero asignado al atleta: ";
                cin >> numero;
                prueba.agregarAtleta(nombre, numero);
                break;
            case 2:
                prueba.registrarTiempos();
                break;
            case 3:
                prueba.mostrarResultados();
                break;
            case 4:
                return 0;
            default:
                cout << "Opcion invalida" << endl;
                break;
        }
    }
}
