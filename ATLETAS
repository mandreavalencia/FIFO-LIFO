#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#define MAX_ATLETAS 100
#define MAX_RONDAS 10

// Estructura para almacenar los datos de un atleta
typedef struct {
    char nombre[50];
    int numero;
    float tiempos[MAX_RONDAS]; // FIFO
    float promedio; // LIFO
} Atleta;

// Funci贸n para solicitar los datos de un atleta al usuario
Atleta solicitar_datos() {
    Atleta atleta;
    printf("Ingrese el nombre del atleta: ");
    scanf("%s", atleta.nombre);
    printf("Ingrese el numero asignado al atleta: ");
    scanf("%d", &atleta.numero);
    return atleta;
}

// Funci贸n para registrar el tiempo de un atleta en el arreglo FIFO
void registrar_tiempo(Atleta* atleta) {
    float tiempo;
    printf("Ingrese el tiempo del atleta %s en esta ronda: ", atleta->nombre);
    scanf("%f", &tiempo);
    // Desplazar los tiempos anteriores hacia la izquierda
    for (int i = 0; i < MAX_RONDAS-1; i++) {
        atleta->tiempos[i] = atleta->tiempos[i+1];
    }
    // Agregar el nuevo tiempo al final del arreglo FIFO
    atleta->tiempos[MAX_RONDAS-1] = tiempo;
}

// Funci贸n para calcular el promedio de un atleta en base a los tiempos en el arreglo FIFO
float calcular_promedio(Atleta atleta) {
    int num_rondas = 0;
    float suma_tiempos = 0;
    for (int i = 0; i < MAX_RONDAS; i++) {
        if (atleta.tiempos[i] > 0) {
            num_rondas++;
            suma_tiempos += atleta.tiempos[i];
        }
    }
    if (num_rondas > 0) {
        return suma_tiempos / num_rondas;
    } else {
        return 0;
    }
}

// Funci贸n para ordenar el arreglo LIFO de atletas por promedio (de menor a mayor)
void ordenar_lifo(Atleta* atletas, int num_atletas) {
    for (int i = 0; i < num_atletas-1; i++) {
        for (int j = i+1; j < num_atletas; j++) {
            if (atletas[i].promedio > atletas[j].promedio) {
                Atleta temp = atletas[i];
                atletas[i] = atletas[j];
                atletas[j] = temp;
            }
        }
    }


  printf("\nResultados de la prueba de atletismo:\n");
    printf("=====================================\n");
    for (int i = 0; i < num_atletas; i++) {
        printf("%d. %s - Promedio: %.2f\n", i+1, atletas[i].nombre, atletas[i].promedio);
    }

    return 0;
